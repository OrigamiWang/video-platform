<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="szu.dao.PermissionDao">


    <resultMap id="PermissionMap" type="szu.model.Permission">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
    </resultMap>
    <!--    List<Integer> getUserPermission(int uid);-->
    <select id="getUserPermission" resultType="java.lang.Integer">
        SELECT p.`id`
        FROM permission p
        WHERE p.`id` IN (SELECT rp.`pid`
                         FROM role_permission rp
                         WHERE rp.`rid` =
                               (SELECT ur.`rid`
                                FROM `user_role` ur
                                WHERE ur.`uid` = #{uid}));
    </select>


</mapper>